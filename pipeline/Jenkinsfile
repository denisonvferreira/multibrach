pipeline {
    agent any
    stages {
        stage('Hello') {
               when {
                    anyOf { 
                        branch 'main*'
                        branch 'dev*'
                    }
               }
            steps {
		    script{
	    	    	def jobName = new Date()
				jobName = jobName.format("yyyyMMddHHmmss", TimeZone.getTimeZone('UTC'))
		        	currentBuild.displayName = "$jobName"
		        	jobName = "teste-nome"+"_"+jobName
				node {
					echo "job name $jobName"
				}
			sh'''
			echo teste" $jobName
			'''			
		    }
	    }
    
	}

    }
//     post{
//     	always{
// 		mail to:"denison.ferreira@hotmail.com.br",
// 		subject: "Test Email",
// 		body: "Test"
// 	}
//     }
    post{
    	failure{
		mail to:"denison.ferreira@hotmail.com.br",
		subject: "Test Email",
			body: "${currentBuild.currentResult}: Job ${env.JOB_NAME}\nMore Info can be found here: ${env.BUILD_URL}"
	}
    }

}
